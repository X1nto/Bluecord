--- ./discord_94011/src/main/java/com/discord/widgets/media/WidgetMedia.java	2021-12-24 01:10:14.765028200 +0400
+++ ./bluecord/src/main/java/com/discord/widgets/media/WidgetMedia.java	2021-12-24 01:08:35.260262300 +0400
@@ -53,6 +53,7 @@ import kotlin.jvm.functions.Function0;
 import kotlin.jvm.functions.Function1;
 import kotlin.jvm.internal.DefaultConstructorMarker;
 import kotlin.reflect.KProperty;
+import mods.view.SheetConfig;
 import rx.Observable;
 import rx.Subscription;
 
@@ -247,6 +248,10 @@ public final class WidgetMedia extends A
 
     private final String getFormattedUrl(Context context, Uri uri) {
         String str;
+        String fixFormattedUrl = SheetConfig.fixFormattedUrl(uri);
+        if (fixFormattedUrl != null) {
+            return fixFormattedUrl;
+        }
         Rect resizeToFitScreen = DisplayUtils.resizeToFitScreen(context, new Rect(0, 0, getMostRecentIntent().getIntExtra("INTENT_MEDIA_WIDTH", 0), getMostRecentIntent().getIntExtra("INTENT_MEDIA_HEIGHT", 0)));
         String lastPathSegment = uri.getLastPathSegment();
         if (lastPathSegment == null || !t.endsWith$default(lastPathSegment, ".gif", false, 2, null)) {
